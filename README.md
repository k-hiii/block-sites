# SiteBlocker Chrome Extension

## 概要

SiteBlocker は、指定した URL パターンをブロックし、ブロックされた際にカスタムのブロックページを表示する Chrome 拡張機能です。  
ユーザーはオプション画面から複数のブロック URL パターンを入力でき、動的ルールにより指定したサイトへのアクセスを制限できます。

## 機能

- **動的ブロック**: ユーザーが設定画面からブロックしたい URL パターンを追加可能
- **カスタムブロックページ**: ブロック対象サイトにアクセスすると、専用のブロックページ（block.html）が表示されます
- **簡単な設定画面**: ブロックパターンはオプション画面（options.html）から直感的に設定できます

## ファイル構成

- **manifest.json**: 拡張機能の設定ファイル（Permissions や Web Accessible Resources などの設定を含む）
- **background.js**: 拡張機能のバックグラウンド（Service Worker）スクリプト。動的ルールの管理を行います
- **options.html**: ユーザーがブロック URL パターンを入力する設定画面
- **options.js**: options.html に連動し、URL の保存およびバックグラウンドスクリプトへの更新要求を行うスクリプト
- **block.html**: ブロック対象サイトにアクセスした際に表示されるブロックページ
- **style.css**: block.html 用のスタイルシート

## インストール方法

1. **ファイルの準備**  
   このリポジトリをダウンロードまたはクローンし、全てのファイル（`manifest.json`、`background.js`、`options.html`、`options.js`、`block.html`、`style.css`）が同一フォルダ内にあることを確認してください。

2. **Chrome 拡張機能の読み込み**

   1. Chrome のアドレスバーに `chrome://extensions/` を入力して拡張機能管理画面を開きます。
   2. 右上の「デベロッパーモード」をオンにします。
   3. 「パッケージ化されていない拡張機能を読み込む」をクリックし、先ほどのフォルダを選択します。

3. **インストール完了**  
   拡張機能一覧に「SiteBlocker」が表示されれば、インストール完了です。

## 利用方法

1. **ブロック URL の設定**

   1. Chrome の拡張機能管理画面または拡張機能のアイコンの詳細画面から「オプション」をクリックし、設定画面（options.html）を開きます。
   2. テキストエリアに、1 行に 1 つずつブロックしたい URL パターンを入力します。
      - 例:
        ```
        ||example.com^
        ||test.com^
        ```
        ※ `urlFilter` に準じたパターンで入力してください。
   3. 「保存」ボタンを押すと、入力した URL パターンが chrome.storage に保存され、バックグラウンドスクリプトが動的ルールを更新します。

2. **ブロックの確認**

   - ブロック対象の URL（例: `https://example.com`）にアクセスすると、設定により自動的に拡張機能内の `block.html` へリダイレクトされ、ブロックページが表示されます。

3. **設定の更新**
   - ブロック URL を追加・変更する場合は、再度オプション画面にアクセスし、内容を修正後「保存」してください。自動的に動的ルールが更新されます。

## トラブルシューティング

- **ブロックページが表示されない場合**

  - 入力した URL パターンが正しいか確認してください。
  - `manifest.json` の `web_accessible_resources` に `block.html` と `style.css` が含まれているか確認してください。
  - Chrome のデベロッパーツールのコンソールにエラーメッセージがないか確認してください。

- **設定が反映されない場合**
  - ブラウザを再起動するか、拡張機能の再読み込みを試してください。

## ライセンス

- ライセンス: [MIT License]
